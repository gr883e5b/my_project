===============================================
* gen_meta.exe - generate *.meta file for REGZA
===============================================

この小さなプログラムは、REGZA の録画ファイルの、*.meta, *.chap を出力するものです。

*.meta ファイルに含まれる情報は、録画日、再生時間、SD/HD、タイトルのみです。
*.chap ファイルは 5 分毎にチャプタが打たれたものとなります。

--------
* 使い方
--------

引数 1 に、"ファイル名(basename)","録画日",definition<1|2>,"タイトル" の記述された csv
引数 2 に、対象の *.ts ファイルのあるディレクトリ

----------
* 注意事項
----------

対応しているのは、tsmuxer で出力した *.ts ファイルのみです(というか tsmuxer 以外で出力
された *.ts ファイルがないものでして...)。なぜなら、ファイルの再生時間を取得するために、
ts packet header の PCR より算出しているためです。

csv ファイルは、euc である必要があります。なぜなら、*.meta には euc で記述されているから
です。この小プログラム内で、変換できればいいのですが、作者の技量ではまだ無理なので...
`nkf -eO titles.utf8.csv` などで、euc に変換したファイル(前述のコマンドならデフォルトで
 nkf.out)を引数に与えます。

csv ファイルの例

"101","2005/10/01 00_00_00",1,"蟲師 #101 『緑の座』"

1 カラム目のファイル名には、12 バイト以内の ASCII 文字のみが無難です。
2 カラム目の録画日時は上記のように、年/月/日[SPACE]時_分_秒の 19 Byte です。
3 カラム目の definition は 1 = HD, 2 = SD となります。
4 カラム目のタイトルは、128 Byte まで大丈夫かと...

----------------------
* 解説(ちょっとした...
----------------------

たとえば、csv ファイルに

"101","2005/10/01 00_00_00",1,"蟲師 #101 『緑の座』"
"102","2005/10/01 00_00_00",1,"蟲師 #102 『瞼の光』"
...

と、記述されていて、

x:\path\to\ 以下に 101.ts, 102.ts, ... とファイルが存在すれば、

実行したディレクトリ内に、101.ts.meta, 101.ts.chap, 102.ts.meta, 102.ts.chap ... と
出力されます。このファイルを *.ts と同じディレクトリに移動すれば、REGZA 再生時に、
タイトル等が表示されます。

------
* 環境
------

前提として、PC - REGZA を samba で共有して、*.ts ファイルを視聴できること。
PC の OS は win7、REGZA は Z1 の環境でのみ確認。

プログラムは win7 mingw64 rubenvb gcc 4.7.2 でコンパイル。

------
* 免責
------

C 言語の超初心者が作ったプログラムであることを、ご了承ください。このプログラムを使用して、
なにが起きても作者にはなんら責任はありません。
